<!doctype html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Test Runner</title>
  </head>
  <body>
    <script src='script.js'></script>
    <script src="https://unpkg.com/expect@1/umd/expect.min.js"></script>
    <script>
      // Tests
      // Failing tests can be seen in your browser console
      // See the expect 1.x documentation here: https://github.com/mjackson/expect#expect1x-documentation
      //expect(false).toBe(true);
      console.clear();
      console.log("Tests started");

      const testdata = {
        "items": [
          {
            "id": "2833226",
            "title": "Avada | Responsive Multi-Purpose Theme",
            "url": "https://themeforest.net/item/avada-responsive-multipurpose-theme/2833226",
            "author": "ThemeFusion",
            "rating": "4.77",
            "cover_image": [
              {"url": "https://via.placeholder.com/200x107/492a69/664c80", "width": "200"},
              {"url": "https://via.placeholder.com/300x161/492a69/664c80", "width": "300"},
              {"url": "https://via.placeholder.com/400x215/492a69/664c80", "width": "400"},
              {"url": "https://via.placeholder.com/500x268/492a69/664c80", "width": "500"},
              {"url": "https://via.placeholder.com/600x332/492a69/664c80", "width": "600"},
              {"url": "https://via.placeholder.com/700x376/492a69/664c80", "width": "700"},
              {"url": "https://via.placeholder.com/800x429/492a69/664c80", "width": "800"}
            ]
          },
         
          {
            "id": "14493994",
            "title": "Bimber - Viral Magazine WordPress Theme",
            "url": "https://themeforest.net/item/bimber-viral-buzz-wordpress-theme/14493994",
            "author": "bringthepixel",
            "rating": "3.12",
            "cover_image": [
              {"url": "https://via.placeholder.com/200x107/492a69/664c80", "width": "200"},
              {"url": "https://via.placeholder.com/300x161/492a69/664c80", "width": "300"},
              {"url": "https://via.placeholder.com/400x215/492a69/664c80", "width": "400"},
              {"url": "https://via.placeholder.com/500x268/492a69/664c80", "width": "500"},
              {"url": "https://via.placeholder.com/600x332/492a69/664c80", "width": "600"},
              {"url": "https://via.placeholder.com/700x376/492a69/664c80", "width": "700"},
              {"url": "https://via.placeholder.com/800x429/492a69/664c80", "width": "800"}
            ]
          },
          {
            "id": "9228123",
            "title": "Canvas | The Multi-Purpose HTML5 Template",
            "url": "https://themeforest.net/item/canvas-the-multipurpose-html5-template/9228123",
            "author": "SemiColonWeb",
            "rating": "5",
            "cover_image": [
              {"url": "https://via.placeholder.com/200x107/492a69/664c80", "width": "200"},
              {"url": "https://via.placeholder.com/300x161/492a69/664c80", "width": "300"},
              {"url": "https://via.placeholder.com/400x215/492a69/664c80", "width": "400"},
              {"url": "https://via.placeholder.com/500x268/492a69/664c80", "width": "500"},
              {"url": "https://via.placeholder.com/600x332/492a69/664c80", "width": "600"},
              {"url": "https://via.placeholder.com/700x376/492a69/664c80", "width": "700"},
              {"url": "https://via.placeholder.com/800x429/492a69/664c80", "width": "800"}
            ]
          },
        ]
      };

      // Test to check if the URL is correct
      try {
        expect(dataUrl).toBe('https://envato.github.io/front-end-coding-test/test.json');
      }
      catch(error) {
        console.error("wrong url",error);
      }

      // Test to check if sorting based on ratings is working
      let sortedTestdata = sortBasedOnRatings(testdata);
      try {
        expect(testdata.items[0].rating).toBe('5');
      }
      catch(error) {
        console.error("Sorting is not workind, first element should have '5' rating after sorting",error);
      }
      
      // Test to check if data is converted in string using buildList function
      let htmlBuild = buildList(sortedTestdata);
      try {
        expect(htmlBuild).toBeA('string');
      }
      catch(error) {
        console.error("3",error);
      }


      console.log("Tests ended");
    </script>
  </body>
</html>
